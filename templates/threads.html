{% extends "base.html" %}
{% call super() %}
{% block content %}
    <style>
        body, h1, h2, h3, p, ul, li {
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: #f5f5f5;
        }

        .threads-container {
            max-width: 800px;
            margin: 20px auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .thread-list {
            list-style-type: none;
        }

        .thread {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background-color: #fff;
        }

        .thread-info {
            margin-bottom: 10px;
        }

        .thread-author, .reply-author {
            font-weight: bold;
            color: #0077cc; /* Adjust color as needed */
        }

        .thread-title {
            font-size: 18px;
            color: #333;
        }

        .thread-date, .reply-date {
            color: #666;
        }

        .thread-content, .reply-content {
            margin-top: 10px;
            color: #444;
        }

        .replies-list {
            list-style-type: none;
            margin-top: 15px;
        }
    </style>
    <div class="threads-container">
        <h2>THREADS</h2>

        <div id="new-thread-form">
            <h3>Create a New Thread</h3>
            <form hx-post="/forum" hx-swap="outerHTML" hx-target="#new-thread-form">
                <label for="new-thread-author">Author:</label>
                <input type="text" id="new-thread-author" name="author" required>

                <label for="new-thread-title">Title:</label>
                <input type="text" id="new-thread-title" name="title" required>

                <label for="new-thread-content">Content:</label>
                <textarea id="new-thread-content" name="content" placeholder="Type your thread content here..."
                          required></textarea>

                <button type="submit">Create Thread</button>
            </form>
        </div>

        <ul class="thread-list">
            {% for thread in threads %}
                <li class="thread">
                    <div class="thread-info">
                <span class="thread-author">
                    {{ thread.author_name }}
                </span>
                        <span class="thread-title">{{ thread.title }}</span>
                        <span class="thread-date">{{ thread.created_at }}</span>
                    </div>
                    <div class="thread-content">
                        {{ thread.content }}
                    </div>
                    <ul class="replies-list">
                        {% for reply in thread.replies %}
                            {% for reply in thread.replies %}
                                {% include "reply.html" %}
                            {% endfor %}
                        {% endfor %}
                    </ul>
                    <button class="reply-button" hx-get="/test" hx-trigger="click" hx-swap="outerHTML"
                            hx-target="{{ "#thread-form-{}"|format(thread.id) }}">Reply
                    </button>
                    <div id="{{ "thread-form-{}"|format(thread.id) }}" class="reply-form">
                        <textarea class="reply-textarea" placeholder="Type your reply here..."></textarea>
                        <button class="submit-reply-button">Submit</button>
                    </div>
                </li>
            {% endfor %}
        </ul>
    </div>
{% endblock %}
